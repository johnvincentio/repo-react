{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MyDevelopment/github/repo-react/dnd/kanban/kanban-dashboard/src/dashboard/StatusLane.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport Dialog from '@material-ui/core/Dialog';\nimport DragIndicator from '@material-ui/icons/DragIndicator';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { Draggable, Droppable } from 'react-beautiful-dnd';\nimport { hooks, emptyArray } from './store';\nimport { OptionsPopper } from '../components/options-popper';\nimport { ConfirmationButtons } from '../components/buttons';\nimport StatusEditorForm from './StatusEditorForm';\nimport TaskCard from './TaskCard';\nimport TaskEditorForm from './TaskEditorForm';\nimport { useLaneStyles, useCommonStyles } from './styles';\nimport { useCurrentUserId } from './CurrentUser';\nexport default function StatusLane({\n  id,\n  dragHandleProps\n}) {\n  const currentUserId = useCurrentUserId();\n  const createTask = hooks.useCreateTask();\n  const updateStatus = hooks.useUpdateStatus();\n  const deleteStatus = hooks.useDeleteStatus();\n  const {\n    title,\n    taskIds\n  } = hooks.useStatus(id);\n  const {\n    0: isTaskFormOpen,\n    1: setIsTaskFormOpen\n  } = useState(false);\n\n  const openTaskForm = () => setIsTaskFormOpen(true);\n\n  const closeTaskForm = () => setIsTaskFormOpen(false);\n\n  const {\n    0: isStatusEditorOpen,\n    1: setIsStatusEditorOpen\n  } = useState(false);\n\n  const openStatusEditor = () => setIsStatusEditorOpen(true);\n\n  const closeStatusEditor = () => setIsStatusEditorOpen(false);\n\n  const {\n    0: isDeleteConfirmOpen,\n    1: setIsDeleteConfirmOpen\n  } = useState(false);\n\n  const openDeleteConfirm = () => setIsDeleteConfirmOpen(true);\n\n  const closeDeleteConfirm = () => setIsDeleteConfirmOpen(false);\n\n  const handleSubmitNewTask = title => {\n    if (createTask && currentUserId) {\n      createTask({\n        title,\n        statusId: id,\n        creatorId: currentUserId\n      });\n    }\n\n    closeTaskForm();\n  };\n\n  const handleSubmitEditStatus = title => {\n    if (updateStatus) {\n      updateStatus(id, {\n        title\n      });\n    }\n\n    closeStatusEditor();\n  };\n\n  const handleConfirmDelete = () => {\n    if (deleteStatus) {\n      deleteStatus(id);\n    }\n  };\n\n  const classNames = useLaneStyles();\n  const commonClassNames = useCommonStyles();\n  return __jsx(Paper, {\n    className: `${classNames.lane} board-status`,\n    elevation: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: classNames.laneHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", _extends({}, dragHandleProps, {\n    className: commonClassNames.dragHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), __jsx(DragIndicator, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  })), __jsx(Typography, {\n    align: \"center\",\n    className: classNames.laneTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, title), __jsx(\"div\", {\n    className: classNames.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, __jsx(IconButton, {\n    onClick: openTaskForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, __jsx(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  })), __jsx(OptionsPopper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, __jsx(StatusOptions, {\n    onClickEdit: openStatusEditor,\n    onClickDelete: openDeleteConfirm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }))), __jsx(Dialog, {\n    open: isStatusEditorOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, __jsx(Paper, {\n    className: classNames.dialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, __jsx(StatusEditorForm, {\n    title: title,\n    onSubmit: handleSubmitEditStatus,\n    onCancel: closeStatusEditor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }))), __jsx(Dialog, {\n    open: isDeleteConfirmOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, __jsx(Paper, {\n    className: classNames.dialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, \"Delete column \\\"\", title, \"\\\"?\"), __jsx(ConfirmationButtons, {\n    onCancel: closeDeleteConfirm,\n    onConfirm: handleConfirmDelete,\n    confirmColor: \"secondary\",\n    confirmLabel: \"Delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  })))), __jsx(\"div\", {\n    className: classNames.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, isTaskFormOpen && __jsx(TaskEditorForm, {\n    onSubmit: handleSubmitNewTask,\n    onCancel: closeTaskForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  })), __jsx(Droppable, {\n    type: \"taskCard\",\n    droppableId: id.toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, provided => {\n    return __jsx(\"div\", _extends({\n      ref: provided.innerRef\n    }, provided.droppableProps, {\n      className: classNames.tasks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }), (taskIds || emptyArray).map((taskId, index) => __jsx(Draggable, {\n      key: taskId,\n      draggableId: taskId.toString(),\n      index: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, provided => {\n      return __jsx(\"div\", _extends({\n        className: classNames.taskContainer,\n        ref: provided.innerRef\n      }, provided.draggableProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 23\n        }\n      }), __jsx(TaskCard, {\n        statusId: id,\n        id: taskId,\n        dragHandleProps: provided.dragHandleProps,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 25\n        }\n      }));\n    })));\n  }));\n}\nexport function StatusOptions({\n  onClickEdit,\n  onClickDelete\n}) {\n  return __jsx(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, __jsx(ListItem, {\n    button: true,\n    onClick: onClickEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, __jsx(ListItemText, {\n    primary: \"Edit Column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  })), __jsx(ListItem, {\n    button: true,\n    onClick: onClickDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, __jsx(ListItemText, {\n    primary: \"Delete Column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/jv/Desktop/MyDevelopment/github/repo-react/dnd/kanban/kanban-dashboard/src/dashboard/StatusLane.tsx"],"names":["React","useState","Paper","Typography","IconButton","AddIcon","Dialog","DragIndicator","List","ListItem","ListItemText","Draggable","Droppable","hooks","emptyArray","OptionsPopper","ConfirmationButtons","StatusEditorForm","TaskCard","TaskEditorForm","useLaneStyles","useCommonStyles","useCurrentUserId","StatusLane","id","dragHandleProps","currentUserId","createTask","useCreateTask","updateStatus","useUpdateStatus","deleteStatus","useDeleteStatus","title","taskIds","useStatus","isTaskFormOpen","setIsTaskFormOpen","openTaskForm","closeTaskForm","isStatusEditorOpen","setIsStatusEditorOpen","openStatusEditor","closeStatusEditor","isDeleteConfirmOpen","setIsDeleteConfirmOpen","openDeleteConfirm","closeDeleteConfirm","handleSubmitNewTask","statusId","creatorId","handleSubmitEditStatus","handleConfirmDelete","classNames","commonClassNames","lane","laneHeader","dragHandle","laneTitle","buttons","dialog","form","toString","provided","innerRef","droppableProps","tasks","map","taskId","index","taskContainer","draggableProps","StatusOptions","onClickEdit","onClickDelete"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport Dialog from '@material-ui/core/Dialog';\nimport DragIndicator from '@material-ui/icons/DragIndicator';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\n\nimport {\n  Draggable,\n  DraggableProvided,\n  Droppable,\n  DroppableProvided,\n  DraggableProvidedDragHandleProps\n} from 'react-beautiful-dnd';\n\nimport { hooks, emptyArray } from './store';\n\nimport { OptionsPopper } from '../components/options-popper';\nimport { ConfirmationButtons } from '../components/buttons';\nimport StatusEditorForm from './StatusEditorForm';\nimport TaskCard from './TaskCard';\nimport TaskEditorForm from './TaskEditorForm';\nimport { useLaneStyles, useCommonStyles } from './styles';\nimport { useCurrentUserId } from './CurrentUser';\n\n\nexport interface Props {\n  id: string,\n  dragHandleProps: DraggableProvidedDragHandleProps\n}\n\nexport default function StatusLane({ id, dragHandleProps }: Props) {\n  const currentUserId = useCurrentUserId();\n  const createTask = hooks.useCreateTask();\n  const updateStatus = hooks.useUpdateStatus();\n  const deleteStatus = hooks.useDeleteStatus();\n  const { title, taskIds } = hooks.useStatus(id);\n\n  const [isTaskFormOpen, setIsTaskFormOpen] = useState(false);\n  const openTaskForm = () => setIsTaskFormOpen(true);\n  const closeTaskForm = () => setIsTaskFormOpen(false);\n\n  const [isStatusEditorOpen, setIsStatusEditorOpen] = useState(false);\n  const openStatusEditor = () => setIsStatusEditorOpen(true);\n  const closeStatusEditor = () => setIsStatusEditorOpen(false);\n\n  const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\n  const openDeleteConfirm = () => setIsDeleteConfirmOpen(true);\n  const closeDeleteConfirm = () => setIsDeleteConfirmOpen(false);\n\n  const handleSubmitNewTask = (title: string) => {\n    if (createTask && currentUserId) {\n      createTask({ title, statusId: id, creatorId: currentUserId });\n    }\n    closeTaskForm();\n  };\n\n  const handleSubmitEditStatus = (title: string) => {\n    if (updateStatus) {\n      updateStatus(id, { title })\n    }\n    closeStatusEditor();\n  };\n\n  const handleConfirmDelete = () => {\n    if (deleteStatus) {\n      deleteStatus(id);\n    }\n  };\n\n  const classNames = useLaneStyles();\n  const commonClassNames = useCommonStyles();\n\n  return (\n    <Paper\n      className={`${classNames.lane} board-status`}\n      elevation={0}\n    >\n      <div className={classNames.laneHeader}>\n        <span {...dragHandleProps} className={commonClassNames.dragHandle}>\n          <DragIndicator fontSize=\"small\" />\n        </span>\n\n        <Typography align=\"center\" className={classNames.laneTitle}>{title}</Typography>\n\n        <div className={classNames.buttons}>\n          <IconButton onClick={openTaskForm}>\n            <AddIcon />\n          </IconButton>\n\n          <OptionsPopper>\n            <StatusOptions\n              onClickEdit={openStatusEditor}\n              onClickDelete={openDeleteConfirm}\n            />\n          </OptionsPopper>\n        </div>\n\n        <Dialog open={isStatusEditorOpen}>\n          <Paper className={classNames.dialog}>\n            <StatusEditorForm\n              title={title}\n              onSubmit={handleSubmitEditStatus}\n              onCancel={closeStatusEditor}\n            />\n          </Paper>\n        </Dialog>\n\n        <Dialog open={isDeleteConfirmOpen}>\n          <Paper className={classNames.dialog}>\n            <Typography>Delete column \"{title}\"?</Typography>\n            <ConfirmationButtons\n              onCancel={closeDeleteConfirm}\n              onConfirm={handleConfirmDelete}\n              confirmColor=\"secondary\"\n              confirmLabel=\"Delete\"\n            />\n          </Paper>\n        </Dialog>\n      </div>\n\n      <div className={classNames.form}>\n        {isTaskFormOpen && (\n          <TaskEditorForm onSubmit={handleSubmitNewTask} onCancel={closeTaskForm}/>\n        )}\n      </div>\n\n      <Droppable type=\"taskCard\" droppableId={id.toString()}>\n        {(provided: DroppableProvided) => {\n          return (\n            <div ref={provided.innerRef} {...provided.droppableProps} className={classNames.tasks}>\n              {(taskIds || emptyArray).map((taskId, index) => (\n                <Draggable key={taskId} draggableId={taskId.toString()} index={index}>\n                  {(provided: DraggableProvided) => {\n                    return (\n                      <div className={classNames.taskContainer} ref={provided.innerRef} {...provided.draggableProps}>\n                        <TaskCard statusId={id} id={taskId} dragHandleProps={provided.dragHandleProps} />\n                      </div>\n                    )\n                  }}\n                </Draggable>\n              ))}\n            </div>\n          )\n        }}\n      </Droppable>\n    </Paper>\n  );\n}\n\nexport interface StatusOptionsProps {\n  onClickEdit: () => void,\n  onClickDelete: () => void\n}\n\nexport function StatusOptions({ onClickEdit, onClickDelete }: StatusOptionsProps) {\n  return (\n    <List>\n      <ListItem button onClick={onClickEdit}>\n        <ListItemText primary=\"Edit Column\"/>\n      </ListItem>\n      <ListItem button onClick={onClickDelete}>\n        <ListItemText primary=\"Delete Column\"/>\n      </ListItem>\n    </List>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}