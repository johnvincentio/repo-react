{"ast":null,"code":"var _jsxFileName = \"/Users/jv/Desktop/MyDevelopment/github/repo-react/dnd/kanban/kanban-dashboard/src/dashboard/CurrentUser.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { hooks } from './store';\nimport { v4 as uuid } from 'uuid';\nvar CurrentUserContext = createContext(null);\nexport default function CurrentUserProvider(_ref) {\n  _s();\n\n  var children = _ref.children,\n      initialUserId = _ref.userId;\n\n  var _useState = useState(initialUserId),\n      userId = _useState[0],\n      setUserId = _useState[1]; // initialize a default user if given an empty userId\n\n\n  var createUser = hooks.useCreateUser();\n  useEffect(function () {\n    if (!userId) {\n      var id = uuid();\n      createUser({\n        id: id,\n        username: 'Default User'\n      });\n      setUserId(id);\n    }\n  }, [userId, setUserId, createUser]);\n  var value = {\n    userId: userId,\n    setUserId: setUserId\n  };\n  return __jsx(CurrentUserContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, children);\n}\n\n_s(CurrentUserProvider, \"e/8Fly50QlHg9Do3IUf/IJoqAQU=\", false, function () {\n  return [hooks.useCreateUser];\n});\n\n_c = CurrentUserProvider;\nexport function useCurrentUserId() {\n  _s2();\n\n  var context = useContext(CurrentUserContext);\n  return context.userId;\n}\n\n_s2(useCurrentUserId, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport function useSetCurrentUserId() {\n  _s3();\n\n  var context = useContext(CurrentUserContext);\n  return context.setUserId;\n}\n\n_s3(useSetCurrentUserId, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport function useCurrentUsername() {\n  _s4();\n\n  var userId = useCurrentUserId();\n  var user = hooks.useUser(userId);\n\n  if (!user) {\n    return '';\n  }\n\n  return user.username;\n}\n\n_s4(useCurrentUsername, \"9l6vmQvh0PPBbiGvFVItM/B1l3U=\", false, function () {\n  return [useCurrentUserId, hooks.useUser];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentUserProvider\");","map":{"version":3,"sources":["/Users/jv/Desktop/MyDevelopment/github/repo-react/dnd/kanban/kanban-dashboard/src/dashboard/CurrentUser.tsx"],"names":["React","createContext","useContext","useState","useEffect","hooks","v4","uuid","CurrentUserContext","CurrentUserProvider","children","initialUserId","userId","setUserId","createUser","useCreateUser","id","username","value","useCurrentUserId","context","useSetCurrentUserId","useCurrentUsername","user","useUser"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAA2BC,aAA3B,EAA0CC,UAA1C,EAAsDC,QAAtD,EAAgEC,SAAhE,QAAiF,OAAjF;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,EAAE,IAAIC,IAAf,QAA2B,MAA3B;AAOA,IAAMC,kBAAkB,GAAGP,aAAa,CAA0B,IAA1B,CAAxC;AAMA,eAAe,SAASQ,mBAAT,OAAyE;AAAA;;AAAA,MAA1CC,QAA0C,QAA1CA,QAA0C;AAAA,MAAxBC,aAAwB,QAAhCC,MAAgC;;AAAA,kBAC1DT,QAAQ,CAACQ,aAAD,CADkD;AAAA,MAC/EC,MAD+E;AAAA,MACvEC,SADuE,iBAGtF;;;AACA,MAAMC,UAAU,GAAGT,KAAK,CAACU,aAAN,EAAnB;AACAX,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACQ,MAAL,EAAa;AACX,UAAMI,EAAE,GAAGT,IAAI,EAAf;AACAO,MAAAA,UAAU,CAAC;AAAEE,QAAAA,EAAE,EAAFA,EAAF;AAAMC,QAAAA,QAAQ,EAAE;AAAhB,OAAD,CAAV;AACAJ,MAAAA,SAAS,CAACG,EAAD,CAAT;AACD;AACF,GANQ,EAMN,CAACJ,MAAD,EAASC,SAAT,EAAoBC,UAApB,CANM,CAAT;AASA,MAAMI,KAAK,GAAG;AAAEN,IAAAA,MAAM,EAANA,MAAF;AAAUC,IAAAA,SAAS,EAATA;AAAV,GAAd;AACA,SACE,MAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAEK,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,QADH,CADF;AAKD;;GApBuBD,mB;UAIHJ,KAAK,CAACU,a;;;KAJHN,mB;AAsBxB,OAAO,SAASU,gBAAT,GAA4B;AAAA;;AACjC,MAAMC,OAAO,GAAGlB,UAAU,CAACM,kBAAD,CAA1B;AACA,SAAOY,OAAO,CAACR,MAAf;AACD;;IAHeO,gB;;AAKhB,OAAO,SAASE,mBAAT,GAA+B;AAAA;;AACpC,MAAMD,OAAO,GAAGlB,UAAU,CAACM,kBAAD,CAA1B;AACA,SAAOY,OAAO,CAACP,SAAf;AACD;;IAHeQ,mB;;AAKhB,OAAO,SAASC,kBAAT,GAA8B;AAAA;;AACnC,MAAMV,MAAM,GAAGO,gBAAgB,EAA/B;AACA,MAAMI,IAAI,GAAGlB,KAAK,CAACmB,OAAN,CAAcZ,MAAd,CAAb;;AACA,MAAI,CAACW,IAAL,EAAW;AACT,WAAO,EAAP;AACD;;AAED,SAAOA,IAAI,CAACN,QAAZ;AACD;;IAReK,kB;UACCH,gB,EACFd,KAAK,CAACmB,O","sourcesContent":["import React, { ReactNode, createContext, useContext, useState, useEffect } from 'react';\nimport { hooks } from './store';\nimport { v4 as uuid } from 'uuid';\n\nexport interface CurrentUserContextValue {\n  userId: string,\n  setUserId: (userId: string) => void\n}\n\nconst CurrentUserContext = createContext<CurrentUserContextValue>(null);\n\nexport interface Props {\n  children: ReactNode,\n  userId: string\n}\nexport default function CurrentUserProvider({ children, userId: initialUserId }: Props) {\n  const [userId, setUserId] = useState(initialUserId);\n\n  // initialize a default user if given an empty userId\n  const createUser = hooks.useCreateUser();\n  useEffect(() => {\n    if (!userId) {\n      const id = uuid();\n      createUser({ id, username: 'Default User' });\n      setUserId(id)\n    }\n  }, [userId, setUserId, createUser])\n\n\n  const value = { userId, setUserId };\n  return (\n    <CurrentUserContext.Provider value={value}>\n      {children}\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport function useCurrentUserId() {\n  const context = useContext(CurrentUserContext);\n  return context.userId;\n}\n\nexport function useSetCurrentUserId() {\n  const context = useContext(CurrentUserContext);\n  return context.setUserId;\n}\n\nexport function useCurrentUsername() {\n  const userId = useCurrentUserId();\n  const user = hooks.useUser(userId);\n  if (!user) {\n    return '';\n  }\n\n  return user.username;\n}\n"]},"metadata":{},"sourceType":"module"}